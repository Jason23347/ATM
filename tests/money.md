# Money系统接口测试

## 概述

这是Money系统接口的特性测试，同时也是黑盒测试。

## test cases

### index

| test     |              Previous              | action       | expect      |
| -------- | :--------------------------------: | ----------- | ----------- |
| 正常测试 | 测试用户`User3`，且有 10 个 `Flow` | 获取5条记录 | 5条记录     |
| 未登录   |                 -                  | -           | 403 状态码  |
| 无记录   |      测试用户`User4`，无记录       | -           | 获取0条记录 |

### deposit

| test       |    Previous     | action                                      | expect     |
| ---------- | :-------------: | ------------------------------------------ | ---------- |
| 正常测试   | 测试用户`User1` | 存款100到10000随机数`num`，并且为100的倍数 |            |
| 输入不合法 | 测试用户`User1` | 存款`-200`                                 | 422 状态码 |
| 输入不合法 | 测试用户`User1` | 存款`10.2`                                 | 422 状态码 |
| 未登录     |        -        | -                                          | 403 状态码 |

### withdraw

| test             |            Previous            | action                                 | expect           |
| ---------------- | :----------------------------: | ------------------------------------- | ---------------- |
| 正常测试         | 测试用户`User1`，账户余额30000 | 提款100到上限随机数`num`，且为100倍数 | 返回错误代码0    |
| 未登录           |               -                | 提款100到上限随机数`num`，且为100倍数 | 403 状态码       |
| 输入不合法       | 测试用户`User1`，账户余额30000 | 提款`-200`                            | 422 状态码       |
| 输入不合法       | 测试用户`User1`，账户余额30000 | 提款`0.1`                             | 422 状态码       |
| 余额不足         |  测试用户`User2`，账户余额100  | 提款`200`                             | 返回错误代码3003 |
| 达到每日提款上限 | 测试用户`User1`，账户余额30000 | 提款`200+上限`                        | 返回错误代码3001 |

### transfer

| test           |                   Previous                   | action                                                    | expect                                  |
| -------------- | :------------------------------------------: | -------------------------------------------------------- | --------------------------------------- |
| 正常测试       | 测试账号`User1`, `User2`，余额分别30000，100 | `User1`向`User2`转账100到上限随机数`num`，且为100倍数    | 返回错误代码0，用户余额 $\plusmn$ `num` |
| 未登录         |          测试账号`User2`，余额为100          | `NULL`向`User2`转账100到上限随机数`num`，且为100倍数     | 403 状态码                              |
| 输入不合法     | 测试账号`User1`, `User2`，余额分别30000，100 | `User2`向`User1`转账-200                                 | 422 状态码                              |
| 转账用户不存在 |         测试账号`User1`，余额为30000         | `User1`向不存在用户转账100到上限随机数`num`，且为100倍数 | 返回错误代码3002                        |
| 余额不足       | 测试账号`User1`, `User2`，余额分别30000，100 | `User2`向`User1`转账200到上限随机数`num`，且为100倍数    | 返回错误代码3003，用户余额不变          |

### query

| test     |    Previous     | action | expect     |
| -------- | :-------------: | ----- | ---------- |
| 正常测试 | 测试账号`User1` | 查询  | 用户信息   |
| 未登录   |        -        | 查询  | 403 状态码 |