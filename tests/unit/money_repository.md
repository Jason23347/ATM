# Money系统接口测试

|         |      |
| ------- | ---- |
| TEST ID | U1.1 |

## 概述

这是MoneyRepository类的单元测试，同时也是白盒测试。
测试返回结果用`$res`变量表示。

## test cases

<!-- TODO add descriotions -->
### query

| test       |      previous       | input   | expect       |
| ---------- | :-----------------: | ------- | ------------ |
| 正常测试   | 生成一个用户`User1` | `User1` | 用户信息     |
| 用户不合法 |          -          | NULL    | 错误代码2001 |

### records

| test     |      previous      | input  | expect             |
| -------- | :----------------: | ------ | ------------------ |
| 正常测试 | 生成 10 个 `Flows` | num: 3 | res->count() === 3 |
| 无结果   |         -          | num: 3 | res->count() === 3 |

### transfer

| test                 |                         previous                          | input                      | expect                                                              |
| -------------------- | :-------------------------------------------------------: | -------------------------- | ------------------------------------------------------------------- |
| 正常功能             | 生成两个用户`User1`, `User2`余额分别为 1000000.00 和 0.98 | User1向User2转账100.00     | 返回错误代码为0，用户余额 $\plusmn$ 100，生成两个流水信息`Flow`对象 |
| 收款人不合法或不存在 |               生成生成一个用户余额为 100.00               | `User1`向`NULL`转账100.00  | 返回错误代码3002，用户余额不变                                      |
| 余额不足             | 生成两个用户`User1`, `User2`余额分别为 1000000.00 和 0.98 | `User2`向`User1`转账100.00 | 返回错误代码3003，用户余额不变                                      |

### deposit

| test     |            previous             | input     | expect        |
| -------- | :-----------------------------: | --------- | ------------- |
| 正常功能 | 生成用户`User1`, 余额为 1010.00 | 存款 1000 | 返回错误代码0 |

### withdraw

| test         |             previous              | input       | expect           |
| ------------ | :-------------------------------: | ----------- | ---------------- |
| 正常功能     |  生成用户`User1`, 余额为 1010.00  | 取款 1000   | 返回错误代码0    |
| 超出每日限额 | 生成用户`User1`, 余额为 101000.00 | 取款 100000 | 返回错误代码3001 |